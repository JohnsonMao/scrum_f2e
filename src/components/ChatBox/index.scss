.chatBox {
    position: relative;
    padding: 40px 84px 40px 100px;
    white-space: pre-wrap;
    border-radius: 40px;
    flex: 1;

    &__name {
        @include position(absolute, -12px, 40px);
        padding: 0 24px;

        &::before {
            @include position(absolute, 0, 0);
            content: ' ';
            width: 10px;
            transform: skewY(45deg) translateY(5px);
            z-index: -1;
        }
    }

    &__next {
        @include position(absolute, initial, initial, 40px, 40px);
        animation: next 0.35s infinite alternate ease-in;
    }

    &__text {
        background: linear-gradient(90deg, $text-default calc(100% - 60px), $text-tint, $text-dark);
        background-size: 0 100px;
        background-repeat: no-repeat;
        background-position: 0 100%;
        background-clip: text;
        animation: textBg 3.4s forwards steps(34, jump-none);
        
        span {
            animation: showText 3.4s forwards steps(34, jump-none);
        }
    }

    &.po {
        background: $role-po-linear;
        border: 2px solid $primary-default;
        box-shadow: $role-po-box-shadow;

        .chatBox__name {
            background: $primary-default;
            color: $bg-dark;

            &::before {
                background: $primary-deepdark;
                box-shadow: $role-po-box-shadow;
            }
        }
        .chatBox__next path {
            stroke: $primary-default;
            fill: $primary-default;
        }
    }
}

@keyframes next {
    80% {
        transform: translateY(64%) scale(1);
    }
    100% {
        transform: translateY(80%) scale(1.2, 0.5);
    }
}

@keyframes showText {
    0% {
        color: transparent;
    }
    99.99% {
        color: transparent;
    }
}

@keyframes textBg {
    100% {
        background-size: 100% 100%;
    }
}
